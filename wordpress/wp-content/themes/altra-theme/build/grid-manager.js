(()=>{"use strict";var e,t={336:()=>{const e=window.wp.element,t=window.ReactJSXRuntime;function i(){const[i,a]=(0,e.useState)(!1),[s,n]=(0,e.useState)([]),[r,o]=(0,e.useState)([]),[l,d]=(0,e.useState)(!1),[c,h]=(0,e.useState)(!1),[g,m]=(0,e.useState)(null);async function u(){d(!0);try{const e=await async function(){const e=await fetch("/wp-json/altra/v1/projects",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":window.altraGridData?.nonce||""},credentials:"same-origin"});if(!e.ok)throw new Error(`Failed to fetch projects: ${e.statusText}`);return e.json()}();n(e);const t=e.filter(e=>e.gridPosition),i=e.filter(e=>!e.gridPosition);o(t),console.log("Projects loaded:",e.length),console.log("Positioned:",t.length,"Unpositioned:",i.length)}catch(e){console.error("Failed to load projects:",e),p("Failed to load projects: "+e.message,"error")}finally{d(!1)}}function p(e,t){m({text:e,type:t}),setTimeout(()=>m(null),5e3)}return(0,e.useEffect)(()=>{u()},[]),l?(0,t.jsx)("div",{className:"altra-grid-manager-loading",children:"Loading Grid Manager..."}):(0,t.jsx)("div",{className:"altra-grid-manager",children:i?(0,t.jsxs)("div",{className:"edit-mode-overlay",children:[(0,t.jsxs)("div",{className:"edit-toolbar",children:[(0,t.jsx)("button",{className:"save-button",onClick:async function(){h(!0),m(null);try{const e=r.map((e,t)=>({id:e.id,x:e.gridPosition?.x||0,y:e.gridPosition?.y||0,w:e.gridPosition?.w||("small"===e.width?4:"large"===e.width?12:6),h:e.gridPosition?.h||2,order:t})),t=await async function(e){const t=await fetch("/wp-json/altra/v1/grid-positions",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.altraGridData?.nonce||""},credentials:"same-origin",body:JSON.stringify({positions:e})});if(!t.ok){const e=await t.json();throw new Error(e.message||`Failed to save grid positions: ${t.statusText}`)}return t.json()}(e);p(t.message,"success"),await u(),a(!1)}catch(e){console.error("Failed to save grid:",e),p("Failed to save grid: "+e.message,"error")}finally{h(!1)}},disabled:c,type:"button",children:c?"Saving...":"Save Grid"}),(0,t.jsx)("button",{className:"cancel-button",onClick:function(){a(!1),u()},disabled:c,type:"button",children:"Cancel"})]}),g&&(0,t.jsx)("div",{className:`grid-message grid-message-${g.type}`,children:g.text}),(0,t.jsxs)("div",{className:"edit-layout",children:[(0,t.jsxs)("div",{className:"project-sidebar",children:[(0,t.jsx)("h3",{children:"Available Projects"}),(0,t.jsx)("div",{className:"projects-list",children:s.map(e=>(0,t.jsxs)("div",{className:"sidebar-project",children:[(0,t.jsx)("img",{src:e.thumbnail,alt:e.title}),(0,t.jsx)("span",{children:e.title})]},e.id))})]}),(0,t.jsxs)("div",{className:"grid-container",children:[(0,t.jsx)("h3",{children:"Homepage Grid (Coming Soon)"}),(0,t.jsx)("p",{children:"GridStack integration will be added next"}),(0,t.jsx)("div",{className:"grid-preview",children:r.map(e=>(0,t.jsxs)("div",{className:"grid-item-preview",children:[(0,t.jsx)("img",{src:e.thumbnail,alt:e.title}),(0,t.jsx)("p",{children:e.title}),(0,t.jsxs)("small",{children:["Width: ",e.width]})]},e.id))})]})]})]}):(0,t.jsx)("button",{className:"edit-grid-button",onClick:()=>a(!0),type:"button",children:"Edit Grid"})})}document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("altra-grid-manager-root");a&&(console.log("Grid Manager initializing..."),(0,e.render)((0,t.jsx)(i,{}),a))})}},i={};function a(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,i,s,n)=>{if(!i){var r=1/0;for(c=0;c<e.length;c++){for(var[i,s,n]=e[c],o=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every(e=>a.O[e](i[l]))?i.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,s,n]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={41:0,800:0};a.O.j=t=>0===e[t];var t=(t,i)=>{var s,n,[r,o,l]=i,d=0;if(r.some(t=>0!==e[t])){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var c=l(a)}for(t&&t(i);d<r.length;d++)n=r[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},i=globalThis.webpackChunkaltra_theme=globalThis.webpackChunkaltra_theme||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var s=a.O(void 0,[800],()=>a(336));s=a.O(s)})();